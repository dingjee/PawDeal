[gd_scene load_steps=3 format=3 uid="uid://cj8wq2hv6pmrt"]

[ext_resource type="Script" path="res://scenes/negotiation/scripts/NegotiationManager.gd" id="1_manager"]
[ext_resource type="Script" path="res://scenes/negotiation/scripts/NegotiationTableUI.gd" id="2_ui"]

[node name="NegotiationTable" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_ui")

[node name="Manager" type="Node" parent="."]
script = ExtResource("1_manager")

[node name="Background" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.08, 0.09, 0.12, 1)

[node name="TopStatusBar" type="HBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_top = 8.0
offset_bottom = 48.0
grow_horizontal = 2
theme_override_constants/separation = 16

[node name="LeftSpacer" type="Control" parent="TopStatusBar"]
layout_mode = 2
size_flags_horizontal = 3

[node name="RoundLabel" type="Label" parent="TopStatusBar"]
layout_mode = 2
text = "å›åˆ 1/10"

[node name="BenefitDisplay" type="HBoxContainer" parent="TopStatusBar"]
layout_mode = 2
theme_override_constants/separation = 8

[node name="AIBenefitBox" type="HBoxContainer" parent="TopStatusBar/BenefitDisplay"]
layout_mode = 2
theme_override_constants/separation = 4

[node name="AILabel" type="Label" parent="TopStatusBar/BenefitDisplay/AIBenefitBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.9, 0.4, 0.4, 1)
text = "AIæ–¹:"

[node name="AIBar" type="ProgressBar" parent="TopStatusBar/BenefitDisplay/AIBenefitBox"]
custom_minimum_size = Vector2(100, 16)
layout_mode = 2
max_value = 200.0
value = 0.0
show_percentage = false

[node name="AIValue" type="Label" parent="TopStatusBar/BenefitDisplay/AIBenefitBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.9, 0.4, 0.4, 1)
text = "0"

[node name="AISentimentBox" type="HBoxContainer" parent="TopStatusBar/BenefitDisplay"]
layout_mode = 2
theme_override_constants/separation = 4

[node name="SentimentEmoji" type="Label" parent="TopStatusBar/BenefitDisplay/AISentimentBox"]
layout_mode = 2
text = "ğŸ˜"

[node name="SentimentBar" type="ProgressBar" parent="TopStatusBar/BenefitDisplay/AISentimentBox"]
custom_minimum_size = Vector2(60, 16)
layout_mode = 2
min_value = -100.0
max_value = 100.0
value = 0.0
show_percentage = false

[node name="SentimentValue" type="Label" parent="TopStatusBar/BenefitDisplay/AISentimentBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.7, 0.7, 0.7, 1)
text = "0%"

[node name="BalanceIcon" type="Label" parent="TopStatusBar/BenefitDisplay"]
layout_mode = 2
text = "âš–ï¸"

[node name="PlayerBenefitBox" type="HBoxContainer" parent="TopStatusBar/BenefitDisplay"]
layout_mode = 2
theme_override_constants/separation = 4

[node name="PlayerLabel" type="Label" parent="TopStatusBar/BenefitDisplay/PlayerBenefitBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.4, 0.8, 0.4, 1)
text = "ç©å®¶:"

[node name="PlayerBar" type="ProgressBar" parent="TopStatusBar/BenefitDisplay/PlayerBenefitBox"]
custom_minimum_size = Vector2(100, 16)
layout_mode = 2
max_value = 200.0
value = 0.0
show_percentage = false

[node name="PlayerValue" type="Label" parent="TopStatusBar/BenefitDisplay/PlayerBenefitBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.4, 0.8, 0.4, 1)
text = "0"

[node name="StateLabel" type="Label" parent="TopStatusBar"]
layout_mode = 2
text = "ç©å®¶å›åˆ"

[node name="RightSpacer" type="Control" parent="TopStatusBar"]
layout_mode = 2
size_flags_horizontal = 3

[node name="TopLayer" type="HBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_left = 16.0
offset_top = 56.0
offset_right = -16.0
offset_bottom = 140.0
grow_horizontal = 2
theme_override_constants/separation = 24

[node name="OpponentHUD" type="HBoxContainer" parent="TopLayer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 16

[node name="AvatarFrame" type="Panel" parent="TopLayer/OpponentHUD"]
custom_minimum_size = Vector2(80, 80)
layout_mode = 2

[node name="Avatar" type="TextureRect" parent="TopLayer/OpponentHUD/AvatarFrame"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
expand_mode = 1
stretch_mode = 5

[node name="FeedbackBubble" type="PanelContainer" parent="TopLayer/OpponentHUD"]
layout_mode = 2
size_flags_horizontal = 3

[node name="FeedbackLabel" type="Label" parent="TopLayer/OpponentHUD/FeedbackBubble"]
layout_mode = 2
text = "è®©æˆ‘è€ƒè™‘ä¸€ä¸‹..."
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="PsychMeters" type="VBoxContainer" parent="TopLayer"]
visible = false
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 8

[node name="GreedMeter" type="HBoxContainer" parent="TopLayer/PsychMeters"]
layout_mode = 2

[node name="Label" type="Label" parent="TopLayer/PsychMeters/GreedMeter"]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
text = "è´ªå©ªåº¦ G"

[node name="Bar" type="ProgressBar" parent="TopLayer/PsychMeters/GreedMeter"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2
size_flags_horizontal = 3
value = 50.0
show_percentage = false

[node name="AnchorMeter" type="HBoxContainer" parent="TopLayer/PsychMeters"]
layout_mode = 2

[node name="Label" type="Label" parent="TopLayer/PsychMeters/AnchorMeter"]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
text = "é”šå®šå€¼ A"

[node name="Bar" type="ProgressBar" parent="TopLayer/PsychMeters/AnchorMeter"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2
size_flags_horizontal = 3
value = 30.0
show_percentage = false

[node name="PowerMeter" type="HBoxContainer" parent="TopLayer/PsychMeters"]
layout_mode = 2

[node name="Label" type="Label" parent="TopLayer/PsychMeters/PowerMeter"]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
text = "æƒåŠ›æ¬² P"

[node name="Bar" type="ProgressBar" parent="TopLayer/PsychMeters/PowerMeter"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2
size_flags_horizontal = 3
value = 70.0
show_percentage = false

[node name="PatienceMeter" type="HBoxContainer" parent="TopLayer/PsychMeters"]
layout_mode = 2

[node name="Label" type="Label" parent="TopLayer/PsychMeters/PatienceMeter"]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
text = "è€å¿ƒå€¼ L"

[node name="Bar" type="ProgressBar" parent="TopLayer/PsychMeters/PatienceMeter"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2
size_flags_horizontal = 3
max_value = 10.0
value = 10.0
show_percentage = false

[node name="MiddleLayer" type="CenterContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 148.0
offset_bottom = -280.0
grow_horizontal = 2
grow_vertical = 2

[node name="OfferContainer" type="PanelContainer" parent="MiddleLayer"]
custom_minimum_size = Vector2(600, 200)
layout_mode = 2

[node name="VBox" type="VBoxContainer" parent="MiddleLayer/OfferContainer"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="Title" type="Label" parent="MiddleLayer/OfferContainer/VBox"]
layout_mode = 2
text = "å½“å‰ææ¡ˆ"
horizontal_alignment = 1

[node name="TopicLayout" type="HBoxContainer" parent="MiddleLayer/OfferContainer/VBox"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 12
alignment = 1

[node name="PlaceholderCard1" type="Panel" parent="MiddleLayer/OfferContainer/VBox/TopicLayout"]
custom_minimum_size = Vector2(100, 120)
layout_mode = 2
mouse_filter = 2

[node name="Label" type="Label" parent="MiddleLayer/OfferContainer/VBox/TopicLayout/PlaceholderCard1"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "æ‹–æ”¾
è®®é¢˜å¡"
horizontal_alignment = 1
vertical_alignment = 1
mouse_filter = 2

[node name="PlaceholderCard2" type="Panel" parent="MiddleLayer/OfferContainer/VBox/TopicLayout"]
custom_minimum_size = Vector2(100, 120)
layout_mode = 2
mouse_filter = 2

[node name="Label" type="Label" parent="MiddleLayer/OfferContainer/VBox/TopicLayout/PlaceholderCard2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "æ‹–æ”¾
è®®é¢˜å¡"
horizontal_alignment = 1
vertical_alignment = 1
mouse_filter = 2

[node name="PlaceholderCard3" type="Panel" parent="MiddleLayer/OfferContainer/VBox/TopicLayout"]
custom_minimum_size = Vector2(100, 120)
layout_mode = 2
mouse_filter = 2

[node name="Label" type="Label" parent="MiddleLayer/OfferContainer/VBox/TopicLayout/PlaceholderCard3"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "æ‹–æ”¾
è®®é¢˜å¡"
horizontal_alignment = 1
vertical_alignment = 1
mouse_filter = 2

[node name="TacticTag" type="Label" parent="MiddleLayer/OfferContainer/VBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.7, 0.7, 0.7, 1)
text = "é™„åŠ å§¿æ€: [ç›´æ¥æäº¤]"
horizontal_alignment = 1

[node name="BottomLayer" type="VBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -272.0
grow_horizontal = 2
grow_vertical = 0
theme_override_constants/separation = 8

[node name="HandArea" type="CenterContainer" parent="BottomLayer"]
custom_minimum_size = Vector2(0, 100)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 0

[node name="HandLayout" type="HBoxContainer" parent="BottomLayer/HandArea"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="TacticSelector" type="HBoxContainer" parent="BottomLayer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_constants/separation = 8

[node name="BtnSimple" type="Button" parent="BottomLayer/TacticSelector"]
custom_minimum_size = Vector2(100, 60)
layout_mode = 2
tooltip_text = "ä¸é™„åŠ ä»»ä½•æ²Ÿé€šå§¿æ€ï¼Œç›´æ¥æäº¤ææ¡ˆã€‚"
text = "ğŸ—£ï¸ ç›´æ¥
æ— ä¿®æ­£"

[node name="BtnSubstantiation" type="Button" parent="BottomLayer/TacticSelector"]
custom_minimum_size = Vector2(100, 60)
layout_mode = 2
tooltip_text = "ç”¨äº‹å®å’Œé€»è¾‘è®ºè¯ææ¡ˆçš„åˆç†æ€§ã€‚
æ•ˆæœï¼šé™ä½ AI é¢„æœŸé—¨æ§›ï¼Œå‡å¼±ç«äº‰å¿ƒæ€ã€‚"
text = "ğŸ“Š ç†æ€§
é¢„æœŸâ†“20%"

[node name="BtnThreat" type="Button" parent="BottomLayer/TacticSelector"]
custom_minimum_size = Vector2(100, 60)
layout_mode = 2
tooltip_text = "è­¦å‘Šå¯¹æ–¹ä¸åˆä½œçš„åæœã€‚
æ•ˆæœï¼šå¤§å¹…é™ä½ AI åº•çº¿ï¼Œä½†ä¼šæ¿€æ€’å¯¹æ–¹ã€‚
âš ï¸ é«˜é£é™©"
text = "âš¡ å¨èƒ
åº•çº¿â†“15"

[node name="BtnRelationship" type="Button" parent="BottomLayer/TacticSelector"]
custom_minimum_size = Vector2(100, 60)
layout_mode = 2
tooltip_text = "å¼ºè°ƒåŒæ–¹çš„å…³ç³»å’Œé•¿æœŸåˆä½œã€‚
æ•ˆæœï¼šå±è”½ AI çš„ç«äº‰å¿ƒæ€ã€‚"
text = "ğŸ’ æ„Ÿæƒ…
ç«äº‰=0"

[node name="BtnApologize" type="Button" parent="BottomLayer/TacticSelector"]
custom_minimum_size = Vector2(100, 60)
layout_mode = 2
tooltip_text = "ä¸ºä¹‹å‰çš„è¡Œä¸ºé“æ­‰ï¼Œè¡¨è¾¾è¯šæ„ã€‚
æ•ˆæœï¼šå‡ç¼“ AI çš„æ—¶é—´ç„¦è™‘ã€‚"
text = "ğŸ™ é“æ­‰
ç„¦è™‘â†“50%"

[node name="ActionButtons" type="HBoxContainer" parent="BottomLayer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_constants/separation = 24

[node name="SubmitBtn" type="Button" parent="BottomLayer/ActionButtons"]
custom_minimum_size = Vector2(160, 48)
layout_mode = 2
text = "ğŸš€ æäº¤ææ¡ˆ"

[node name="ReactionButtons" type="HBoxContainer" parent="BottomLayer"]
visible = false
layout_mode = 2
size_flags_horizontal = 4
theme_override_constants/separation = 12

[node name="BtnAccept" type="Button" parent="BottomLayer/ReactionButtons"]
custom_minimum_size = Vector2(100, 40)
layout_mode = 2
text = "âœ… æ¥å—"

[node name="BtnRejectSoft" type="Button" parent="BottomLayer/ReactionButtons"]
custom_minimum_size = Vector2(100, 40)
layout_mode = 2
text = "âŒ æ‹’ç»"

[node name="BtnRejectHard" type="Button" parent="BottomLayer/ReactionButtons"]
custom_minimum_size = Vector2(100, 40)
layout_mode = 2
text = "âœï¸ ä¿®æ”¹"

[node name="BtnWalkAway" type="Button" parent="BottomLayer/ReactionButtons"]
custom_minimum_size = Vector2(100, 40)
layout_mode = 2
text = "ğŸšª ç¦»å¼€"
